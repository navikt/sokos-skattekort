# Konfigurasjonssettinger

Denne seksjonen dokumenterer konfigurasjonssettinger fra application*.conf-filene til applikasjonen

| Generell konfigurasjon | Beskrivelse                                                                                                                            |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| NAIS_APP_NAME          | Applikasjonens navn, levert fra NAIS                                                                                                   |
| NAIS_POD_NAME          | Applikasjonens pod-navn, levert fra NAIS                                                                                               |
| ENVIRONMENT            | En setting som styrer hvordan applikasjonen laster konfigurasjon. Styrer hvilken fil som lastes "først", f.eks. application-local.conf |
| MQ_LISTENER_ENABLED    | Konfigurasjonssetting som styrer hvorvidt applikasjonen skal forsøke å koble seg til JMS.                                              |
| SCHEDULER_ENABLED      | Styrer hvorvidt applikasjonen starter cron-jobber                                                                                      |
| KAFKA_CONSUMER_ENABLED | Styrer hvorvidt applikasjonen forsøker å koble seg til Kafka, som brukes til å interagere med PDL                                      |

| Konfigurasjon av funksjonalitet | Beskrivelse                                                                                                                                                                          |
|---------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| GYLDIGE_FNR                     | Styrer hvilke fødselsnummer som godtas av applikasjonen, settes til en av verdiene i Foedselsnummerkategori. Brukes for å filtrere ut fødselsnummer som er invalide i et environment |
| BESTILLING_ORGNR                | Styrer hvilket organisasjonsnummer vi bestiller skattekort under. Økonomilinjas orgnummer brukes i produksjon for å ikke kollidere med henting av skattekort i lønnssystemet.        |

| Konfigurasjon av infrastruktur                   | Beskrivelse                                                                                                                                                                          |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AZURE_APP_PROVIDER_NAME                          | Navnet på OAuth-provider. Siden vi bruker azure entra er denne "azureAD" i produksjon. I test-modus bruker vi "default", som er default i MockOAuth2Server                           |
| AZURE_APP_WELL_KNOWN_URL                         | Well known url til Azure entra. Settes av Nais, overrides til å peke på MockOAuth2Server i test.                                                                                     |
| AZURE_APP_TENANT_ID                              | Azure entra tenant ID. Settes av Nais                                                                                                                                                |
| AZURE_APP_CLIENT_SECRET                          | Azure application client secret. Settes av Nais                                                                                                                                      |
| AZURE_APP_AUTH_PROVIDER_NAME                     | Azure application authentication provider name. Settes av Nais                                                                                                                       |
| MASKINPORTEN_SYSTEM_BRUKER_CLAIM                 | Organisasjonsnummer i claim for å skape token knyttet til systembrukeren vår, brukes under bestilling av skattekort fra Skatteetaten. Må settes til samme verdi som BESTILLING_ORGNR |
| MASKINPORTEN_CLIENT_ID                           | Maskinporten client id, UUID. Settes av Nais                                                                                                                                         |
| MASKINPORTEN_WELL_KNOWN_URL                      | Maskinporten oidc endpoint. Settes av Nais                                                                                                                                           |
| MASKINPORTEN_CLIENT_JWK                          | Maskinporten client JWK. Settes av Nais                                                                                                                                              |
| MASKINPORTEN_SCOPES                              | Maskinporten scopes. Settes av Nais                                                                                                                                                  |
| SEND_BESTILLING_BATCH_CRON_EXPRESSION            | Spring cron expression-format styring av hvor ofte bestillings-prosessen trigges                                                                                                     |
| SEND_UTSENDING_CRON_EXPRESSION                   | Spring cron expression-format styring av hvor ofte utsendings-prosessen trigges                                                                                                      |
| HENT_SKATTEKORT_BATCH_CRON_EXPRESSION            | Spring cron expression-format styring av hvor ofte resultat av bestillinger og forespørsler om oppdateringer trigges                                                                 |
| HENT_OPPDATERTE_SKATTEKORT_BATCH_CRON_EXPRESSION | Spring cron expression-format styring av hvor ofte oppdaterte skattekort blir etterspurt                                                                                             |
| FETCH_METRICS_CRON_EXPRESSION                    | Spring cron expression-format styring av hvor ofte metrikker blir oppdatert                                                                                                          |
| KAFKA_CONSUMER_GROUP_ID                          | Konfigurerer tilkobling til kafka: consumer group                                                                                                                                    |
| KAFKA_CONSUMER_TOPIC                             | Konfigurerer tilkobling til kafka: topic                                                                                                                                             |
| KAFKA_CONSUMER_OFFSET_RESET                      | Konfigurerer håndtering av gamle meldinger, se "auto.offset.reset" i Kafka-dokumentasjonen. I vanlig drift settes denne til "latest"                                                 |
| KAFKA_BROKERS                                    | Kafka brokers. Settes av Nais                                                                                                                                                        |
| KAFKA_SCHEMA_REGISTRY                            | Kafka schema registry. Settes av Nais                                                                                                                                                |
| KAFKA_SCHEMA_REGISTRY_USER                       | Kafka schema registry user. Settes av Nais                                                                                                                                           |
| KAFKA_SCHEMA_REGISTRY_PASSWORD                   | Kafka schema registry password. Settes av Nais                                                                                                                                       |
| KAFKA_TRUSTSTORE_PATH                            | Kafka truststore. Settes av Nais                                                                                                                                                     |
| KAFKA_CREDSTORE_PASSWORD                         | Kafka credentials store password. Settes av Nais.                                                                                                                                    |
| KAFKA_KEYSTORE_PATH                              | Kafka keystore path. Settes av Nais.                                                                                                                                                 |
| UNLEASH_SERVER_API_URL                           | Unleash URL, levert fra NAIS                                                                                                                                                         |
| UNLEASH_SERVER_API_TOKEN                         | Unleash token, levert fra NAIS                                                                                                                                                       |
| UNLEASH_SERVER_API_ENV                           | Unleash environment, brukes til styring av hvilken setting av en feature switch applikasjoen skal bruke                                                                              |
| MQ_HOSTNAME                                      | IBM MQ server hostname                                                                                                                                                               |
| MQ_PORT                                          | IBM MQ server portnummer                                                                                                                                                             |
| MQ_QUEUE_MANAGER_NAME                            | IBM MQ server queue manager name                                                                                                                                                     |
| MQ_CHANNEL_NAME                                  | IBM MQ server channel name                                                                                                                                                           |
| MQ_USERNAME                                      | IBM MQ server username. Settes av Nais                                                                                                                                               |
| MQ_PASSWORD                                      | IBM MQ server username. Settes av Nais                                                                                                                                               |
| MQ_FRA_FORSYSTEM_QUEUE_NAME                      | IBM MQ kø for bestillinger fra Oppdrag Z                                                                                                                                             |
| MQ_LEVERANSEKOE_OPPDRAGZ_SKATTEKORT              | IBM MQ kø for leveranser av skattekort til Oppdrag Z                                                                                                                                 |
| SKATTEETATEN_API_URL                             | Base-URL til skatteetatens API for å bestille skattekort                                                                                                                             |
| PDL_URL                                          | URL til PDL-API                                                                                                                                                                      |
| PDL_SCOPE                                        | Scope for tilkobling til PDL-API                                                                                                                                                     |
| DB_DATABASE                                      | Navn på database, typisk avarter av "sokos-skattekort". I produksjon vil databasenavnet være mer komplisert. Settes av Nais                                                          |
| DB_HOST                                          | Hostnavn/ipadresse til databaseserver. Settes av Nais                                                                                                                                |
| DB_JDBC_URL                                      | JDBC URL til databaseserver. Settes av Nais                                                                                                                                          |
| DB_USERNAME                                      | Brukernavn til databaseserver. Settes av Nais.                                                                                                                                       |
| DB_PASSWORD                                      | Passord til databaeserver. Settes av Nais.                                                                                                                                           |
| DB_PORT                                          | Portnummer til databaseserver. Settes av Nais.                                                                                                                                       |
